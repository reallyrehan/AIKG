/****************************************************
* mark.js v9.0.0
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],a):(b.Mark=a(b.jQuery))}(this,(function(f){f=f&&f.hasOwnProperty("default")?f["default"]:f;function b(j){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){b=function(k){return typeof k}}else{b=function(k){return k&&typeof Symbol==="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k}}return b(j)}function e(j,k){if(!(j instanceof k)){throw new TypeError("Cannot call a class as a function")}}function i(m,k){for(var j=0;j<k.length;j++){var l=k[j];l.enumerable=l.enumerable||false;l.configurable=true;if("value" in l){l.writable=true}Object.defineProperty(m,l.key,l)}}function d(l,j,k){if(j){i(l.prototype,j)}if(k){i(l,k)}return l}function c(){c=Object.assign||function(m){for(var k=1;k<arguments.length;k++){var l=arguments[k];for(var j in l){if(Object.prototype.hasOwnProperty.call(l,j)){m[j]=l[j]}}}return m};return c.apply(this,arguments)}var a=function(){function l(A){var D=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var C=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var B=arguments.length>3&&arguments[3]!==undefined?arguments[3]:5000;e(this,l);this.ctx=A;this.iframes=D;this.exclude=C;this.iframesTimeout=B}d(l,[{key:"getContexts",value:function w(){var A,B=[];if(typeof this.ctx==="undefined"||!this.ctx){A=[]}else{if(NodeList.prototype.isPrototypeOf(this.ctx)){A=Array.prototype.slice.call(this.ctx)}else{if(Array.isArray(this.ctx)){A=this.ctx}else{if(typeof this.ctx==="string"){A=Array.prototype.slice.call(document.querySelectorAll(this.ctx))}else{A=[this.ctx]}}}}A.forEach(function(C){var D=B.filter(function(E){return E.contains(C)}).length>0;if(B.indexOf(C)===-1&&!D){B.push(C)}});return B}},{key:"getIframeContents",value:function s(F,A){var E=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};var D;try{var B=F.contentWindow;D=B.document;if(!B||!D){throw new Error("iframe inaccessible")}}catch(C){E()}if(D){A(D)}}},{key:"isIframeBlank",value:function p(D){var C="about:blank",B=D.getAttribute("src").trim(),A=D.contentWindow.location.href;return A===C&&B!==C&&B}},{key:"observeIframeLoad",value:function u(G,A,F){var E=this;var B=false,D=null;var C=function C(){if(B){return}B=true;clearTimeout(D);try{if(!E.isIframeBlank(G)){G.removeEventListener("load",C);E.getIframeContents(G,A,F)}}catch(H){F()}};G.addEventListener("load",C);D=setTimeout(C,this.iframesTimeout)}},{key:"onIframeReady",value:function y(D,A,C){try{if(D.contentWindow.document.readyState==="complete"){if(this.isIframeBlank(D)){this.observeIframeLoad(D,A,C)}else{this.getIframeContents(D,A,C)}}else{this.observeIframeLoad(D,A,C)}}catch(B){C()}}},{key:"waitForIframes",value:function x(B,A){var D=this;var C=0;this.forEachIframe(B,function(){return true},function(E){C++;D.waitForIframes(E.querySelector("html"),function(){if(!--C){A()}})},function(E){if(!E){A()}})}},{key:"forEachIframe",value:function z(I,A,H){var G=this;var B=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var C=I.querySelectorAll("iframe"),E=C.length,F=0;C=Array.prototype.slice.call(C);var D=function D(){if(--E<=0){B(F)}};if(!E){D()}C.forEach(function(J){if(l.matches(J,G.exclude)){D()}else{G.onIframeReady(J,function(K){if(A(J)){F++;H(K)}D()},D)}})}},{key:"createIterator",value:function o(A,C,B){return document.createNodeIterator(A,C,B,false)}},{key:"createInstanceOnIframe",value:function v(A){return new l(A.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function k(C,A,G){var F=C.compareDocumentPosition(G),B=Node.DOCUMENT_POSITION_PRECEDING;if(F&B){if(A!==null){var D=A.compareDocumentPosition(G),E=Node.DOCUMENT_POSITION_FOLLOWING;if(D&E){return true}}else{return true}}return false}},{key:"getIteratorNode",value:function q(B){var A=B.previousNode();var C;if(A===null){C=B.nextNode()}else{C=B.nextNode()&&B.nextNode()}return{prevNode:A,node:C}}},{key:"checkIframeFilter",value:function j(C,A,D,F){var B=false,E=false;F.forEach(function(H,G){if(H.val===D){B=G;E=H.handled}});if(this.compareNodeIframe(C,A,D)){if(B===false&&!E){F.push({val:D,handled:true})}else{if(B!==false&&!E){F[B].handled=true}}return true}if(B===false){F.push({val:D,handled:false})}return false}},{key:"handleOpenIframes",value:function m(E,D,C,A){var B=this;E.forEach(function(F){if(!F.handled){B.getIframeContents(F.val,function(G){B.createInstanceOnIframe(G).forEachNode(D,C,A)})}})}},{key:"iterateThroughNodes",value:function t(I,L,K,H,J){var F=this;var G=this.createIterator(L,I,H);var D=[],A=[],C,B,E=function E(){var M=F.getIteratorNode(G);B=M.prevNode;C=M.node;return C};while(E()){if(this.iframes){this.forEachIframe(L,function(M){return F.checkIframeFilter(C,B,M,D)},function(M){F.createInstanceOnIframe(M).forEachNode(I,function(N){return A.push(N)},H)})}A.push(C)}A.forEach(function(M){K(M)});if(this.iframes){this.handleOpenIframes(D,I,K,H)}J()}},{key:"forEachNode",value:function n(F,E,D){var B=this;var A=arguments.length>3&&arguments[3]!==undefined?arguments[3]:function(){};var G=this.getContexts();var C=G.length;if(!C){A()}G.forEach(function(H){var I=function I(){B.iterateThroughNodes(F,H,E,D,function(){if(--C<=0){A()}})};if(B.iframes){B.waitForIframes(H,I)}else{I()}})}}],[{key:"matches",value:function r(D,A){var C=typeof A==="string"?[A]:A,E=D.matches||D.matchesSelector||D.msMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.webkitMatchesSelector;if(E){var B=false;C.every(function(F){if(E.call(D,F)){B=true;return false}return true});return B}else{return false}}}]);return l}();var h=function(){function r(w){e(this,r);this.opt=c({},{diacritics:true,synonyms:{},accuracy:"partially",caseSensitive:false,ignoreJoiners:false,ignorePunctuation:[],wildcards:"disabled"},w)}d(r,[{key:"create",value:function n(w){if(this.opt.wildcards!=="disabled"){w=this.setupWildcardsRegExp(w)}w=this.escapeStr(w);if(Object.keys(this.opt.synonyms).length){w=this.createSynonymsRegExp(w)}if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length){w=this.setupIgnoreJoinersRegExp(w)}if(this.opt.diacritics){w=this.createDiacriticsRegExp(w)}w=this.createMergedBlanksRegExp(w);if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length){w=this.createJoinersRegExp(w)}if(this.opt.wildcards!=="disabled"){w=this.createWildcardsRegExp(w)}w=this.createAccuracyRegExp(w);return new RegExp(w,"gm".concat(this.opt.caseSensitive?"":"i"))}},{key:"sortByLength",value:function t(w){return w.sort(function(y,x){return y.length===x.length?y>x?1:-1:x.length-y.length})}},{key:"escapeStr",value:function k(w){return w.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createSynonymsRegExp",value:function m(A){var C=this;var w=this.opt.synonyms,y=this.opt.caseSensitive?"":"i",B=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var x in w){if(w.hasOwnProperty(x)){var z=Array.isArray(w[x])?w[x]:[w[x]];z.unshift(x);z=this.sortByLength(z).map(function(D){if(C.opt.wildcards!=="disabled"){D=C.setupWildcardsRegExp(D)}D=C.escapeStr(D);return D}).filter(function(D){return D!==""});if(z.length>1){A=A.replace(new RegExp("(".concat(z.map(function(D){return C.escapeStr(D)}).join("|"),")"),"gm".concat(y)),B+"(".concat(z.map(function(D){return C.processSynonyms(D)}).join("|"),")")+B)}}}return A}},{key:"processSynonyms",value:function j(w){if(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length){w=this.setupIgnoreJoinersRegExp(w)}return w}},{key:"setupWildcardsRegExp",value:function v(w){w=w.replace(/(?:\\)*\?/g,function(x){return x.charAt(0)==="\\"?"?":"\x01"});return w.replace(/(?:\\)*\*/g,function(x){return x.charAt(0)==="\\"?"*":"\x02"})}},{key:"createWildcardsRegExp",value:function l(x){var w=this.opt.wildcards==="withSpaces";return x.replace(/\u0001/g,w?"[\\S\\s]?":"\\S?").replace(/\u0002/g,w?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function u(w){return w.replace(/[^(|)\\]/g,function(A,y,x){var z=x.charAt(y+1);if(/[(|)\\]/.test(z)||z===""){return A}else{return A+"\0"}})}},{key:"createJoinersRegExp",value:function p(y){var w=[];var x=this.opt.ignorePunctuation;if(Array.isArray(x)&&x.length){w.push(this.escapeStr(x.join("")))}if(this.opt.ignoreJoiners){w.push("\\u00ad\\u200b\\u200c\\u200d")}return w.length?y.split(/\u0000+/).join("[".concat(w.join(""),"]*")):y}},{key:"createDiacriticsRegExp",value:function o(z){var x=this.opt.caseSensitive?"":"i",w=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"];var y=[];z.split("").forEach(function(A){w.every(function(B){if(B.indexOf(A)!==-1){if(y.indexOf(B)>-1){return false}z=z.replace(new RegExp("[".concat(B,"]"),"gm".concat(x)),"[".concat(B,"]"));y.push(B)}return true})});return z}},{key:"createMergedBlanksRegExp",value:function s(w){return w.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function q(C){var z=this;var y="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿";var A=this.opt.accuracy,B=typeof A==="string"?A:A.value,w=typeof A==="string"?[]:A.limiters,x="";w.forEach(function(D){x+="|".concat(z.escapeStr(D))});switch(B){case"partially":default:return"()(".concat(C,")");case"complementary":x="\\s"+(x?x:this.escapeStr(y));return"()([^".concat(x,"]*").concat(C,"[^").concat(x,"]*)");case"exactly":return"(^|\\s".concat(x,")(").concat(C,")(?=$|\\s").concat(x,")");case"prefix":return"(^|\\s".concat(x,")(").concat(C,")")}}}]);return r}();var g=function(){function y(H){e(this,y);this.ctx=H;this.ie=false;var I=window.navigator.userAgent;if(I.indexOf("MSIE")>-1||I.indexOf("Trident")>-1){this.ie=true}}d(y,[{key:"log",value:function s(I){var J=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"debug";var H=this.opt.log;if(!this.opt.debug){return}if(b(H)==="object"&&typeof H[J]==="function"){H[J]("mark.js: ".concat(I))}}},{key:"getSeparatedKeywords",value:function A(I){var J=this;var H=[];I.forEach(function(K){if(!J.opt.separateWordSearch){if(K.trim()&&H.indexOf(K)===-1){H.push(K)}}else{K.split(" ").forEach(function(L){if(L.trim()&&H.indexOf(L)===-1){H.push(L)}})}});return{keywords:H.sort(function(L,K){return K.length-L.length}),length:H.length}}},{key:"isNumeric",value:function D(H){return Number(parseFloat(H))==H}},{key:"checkRanges",value:function E(K){var J=this;if(!Array.isArray(K)||Object.prototype.toString.call(K[0])!=="[object Object]"){this.log("markRanges() will only accept an array of objects");this.opt.noMatch(K);return[]}var H=[];var I=0;K.sort(function(M,L){return M.start-L.start}).forEach(function(N){var O=J.callNoMatchOnInvalidRanges(N,I),P=O.start,L=O.end,M=O.valid;if(M){N.start=P;N.length=L-P;H.push(N);I=L}});return H}},{key:"callNoMatchOnInvalidRanges",value:function m(I,K){var L,H,J=false;if(I&&typeof I.start!=="undefined"){L=parseInt(I.start,10);H=L+parseInt(I.length,10);if(this.isNumeric(I.start)&&this.isNumeric(I.length)&&H-K>0&&H-L>0){J=true}else{this.log("Ignoring invalid or overlapping range: "+"".concat(JSON.stringify(I)));this.opt.noMatch(I)}}else{this.log("Ignoring invalid range: ".concat(JSON.stringify(I)));this.opt.noMatch(I)}return{start:L,end:H,valid:J}}},{key:"checkWhitespaceRanges",value:function l(K,J,L){var I,M=true,H=L.length,N=J-H,O=parseInt(K.start,10)-N;O=O>H?H:O;I=O+parseInt(K.length,10);if(I>H){I=H;this.log("End range automatically set to the max value of ".concat(H))}if(O<0||I-O<0||O>H||I>H){M=false;this.log("Invalid range: ".concat(JSON.stringify(K)));this.opt.noMatch(K)}else{if(L.substring(O,I).replace(/\s+/g,"")===""){M=false;this.log("Skipping whitespace only range: "+JSON.stringify(K));this.opt.noMatch(K)}}return{start:O,end:I,valid:M}}},{key:"getTextNodes",value:function t(H){var J=this;var K="",I=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(L){I.push({start:K.length,end:(K+=L.textContent).length,node:L})},function(L){if(J.matchesExclude(L.parentNode)){return NodeFilter.FILTER_REJECT}else{return NodeFilter.FILTER_ACCEPT}},function(){H({value:K,nodes:I})})}},{key:"matchesExclude",value:function k(H){return a.matches(H,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function G(K,N,H){var M=!this.opt.element?"mark":this.opt.element,J=K.splitText(N),I=J.splitText(H-N);var L=document.createElement(M);L.setAttribute("data-markjs","true");if(this.opt.className){L.setAttribute("class",this.opt.className)}L.textContent=J.textContent;J.parentNode.replaceChild(L,J);return I}},{key:"wrapRangeInMappedTextNode",value:function n(M,L,H,J,I){var K=this;M.nodes.every(function(T,Q){var P=M.nodes[Q+1];if(typeof P==="undefined"||P.start>L){if(!J(T.node)){return false}var R=L-T.start,S=(H>T.end?T.end:H)-T.start,O=M.value.substr(0,T.start),N=M.value.substr(S+T.start);T.node=K.wrapRangeInTextNode(T.node,R,S);M.value=O+N;M.nodes.forEach(function(U,V){if(V>=Q){if(M.nodes[V].start>0&&V!==Q){M.nodes[V].start-=S}M.nodes[V].end-=S}});H-=S;I(T.node.previousSibling,T.start);if(H>T.end){L=T.end}else{return false}}return true})}},{key:"wrapGroups",value:function j(J,K,H,I){J=this.wrapRangeInTextNode(J,K,K+H);I(J.previousSibling);return J}},{key:"separateGroups",value:function x(N,L,I,K,J){var H=L.length;for(var M=1;M<H;M++){var O=N.textContent.indexOf(L[M]);if(L[M]&&O>-1&&K(L[M],N)){N=this.wrapGroups(N,O,L[M].length,J)}}return N}},{key:"wrapMatches",value:function o(M,L,K,J,N){var I=this;var H=L===0?0:L+1;this.getTextNodes(function(O){O.nodes.forEach(function(R){R=R.node;var P;while((P=M.exec(R.textContent))!==null&&P[H]!==""){if(I.opt.separateGroups){R=I.separateGroups(R,P,H,K,J)}else{if(!K(P[H],R)){continue}var S=P.index;if(H!==0){for(var Q=1;Q<H;Q++){S+=P[Q].length}}R=I.wrapGroups(R,S,P[H].length,J)}M.lastIndex=0}});N()})}},{key:"wrapMatchesAcrossElements",value:function p(M,L,K,J,N){var I=this;var H=L===0?0:L+1;this.getTextNodes(function(S){var P;while((P=M.exec(S.value))!==null&&P[H]!==""){var R=P.index;if(H!==0){for(var Q=1;Q<H;Q++){R+=P[Q].length}}var O=R+P[H].length;I.wrapRangeInMappedTextNode(S,R,O,function(T){return K(P[H],T)},function(T,U){M.lastIndex=U;J(T)})}N()})}},{key:"wrapRangeFromIndex",value:function q(I,K,J,L){var H=this;this.getTextNodes(function(N){var M=N.value.length;I.forEach(function(R,P){var Q=H.checkWhitespaceRanges(R,M,N.value),T=Q.start,O=Q.end,S=Q.valid;if(S){H.wrapRangeInMappedTextNode(N,T,O,function(U){return K(U,R,N.value.substring(T,O),P)},function(U){J(U,R)})}});L()})}},{key:"unwrapMatches",value:function B(J){var I=J.parentNode;var H=document.createDocumentFragment();while(J.firstChild){H.appendChild(J.removeChild(J.firstChild))}I.replaceChild(H,J);if(!this.ie){I.normalize()}else{this.normalizeTextNode(I)}}},{key:"normalizeTextNode",value:function C(H){if(!H){return}if(H.nodeType===3){while(H.nextSibling&&H.nextSibling.nodeType===3){H.nodeValue+=H.nextSibling.nodeValue;H.parentNode.removeChild(H.nextSibling)}}else{this.normalizeTextNode(H.firstChild)}this.normalizeTextNode(H.nextSibling)}},{key:"markRegExp",value:function v(M,K){var H=this;this.opt=K;this.log('Searching with expression "'.concat(M,'"'));var J=0,L="wrapMatches";var I=function I(N){J++;H.opt.each(N)};if(this.opt.acrossElements){L="wrapMatchesAcrossElements"}this[L](M,this.opt.ignoreGroups,function(N,O){return H.opt.filter(O,N,J)},I,function(){if(J===0){H.opt.noMatch(M)}H.opt.done(J)})}},{key:"mark",value:function u(N,I){var L=this;this.opt=I;var O=0,M="wrapMatches";var K=this.getSeparatedKeywords(typeof N==="string"?[N]:N),J=K.keywords,H=K.length,P=function P(R){var Q=new h(L.opt).create(R);var S=0;L.log('Searching with expression "'.concat(Q,'"'));L[M](Q,1,function(T,U){return L.opt.filter(U,R,O,S)},function(T){S++;O++;L.opt.each(T)},function(){if(S===0){L.opt.noMatch(R)}if(J[H-1]===R){L.opt.done(O)}else{P(J[J.indexOf(R)+1])}})};if(this.opt.acrossElements){M="wrapMatchesAcrossElements"}if(H===0){this.opt.done(O)}else{P(J[0])}}},{key:"markRanges",value:function r(I,K){var L=this;this.opt=K;var J=0,H=this.checkRanges(I);if(H&&H.length){this.log("Starting to mark with the following ranges: "+JSON.stringify(H));this.wrapRangeFromIndex(H,function(P,N,O,M){return L.opt.filter(P,N,O,M)},function(N,M){J++;L.opt.each(N,M)},function(){L.opt.done(J)})}else{this.opt.done(J)}}},{key:"unmark",value:function z(H){var J=this;this.opt=H;var I=this.opt.element?this.opt.element:"*";I+="[data-markjs]";if(this.opt.className){I+=".".concat(this.opt.className)}this.log('Removal selector "'.concat(I,'"'));this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(K){J.unwrapMatches(K)},function(M){var K=a.matches(M,I),L=J.matchesExclude(M);if(!K||L){return NodeFilter.FILTER_REJECT}else{return NodeFilter.FILTER_ACCEPT}},this.opt.done)}},{key:"opt",set:function w(L){this._opt=c({},{element:"",className:"",exclude:[],iframes:false,iframesTimeout:5000,separateWordSearch:true,acrossElements:false,ignoreGroups:0,each:function K(){},noMatch:function I(){},filter:function J(){return true},done:function H(){},debug:false,log:window.console},L)},get:function F(){return this._opt}},{key:"iterator",get:function F(){return new a(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]);return y}();f.fn.mark=function(j,k){new g(this.get()).mark(j,k);return this};f.fn.markRegExp=function(k,j){new g(this.get()).markRegExp(k,j);return this};f.fn.markRanges=function(j,k){new g(this.get()).markRanges(j,k);return this};f.fn.unmark=function(j){new g(this.get()).unmark(j);return this};return f})));